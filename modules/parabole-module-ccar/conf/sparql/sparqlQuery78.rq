PREFIX mpb-root-main: <http://www.mindparabole.com/ontology/finance/MPBRoot_Main#> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX cit:<http://www.mindparabole.com/ontology/finance/CIT_Main#>
PREFIX CDE:<http://parabole.com/Coarys/CriticalDataElements#>
PREFIX mt:<http://www.mindparabole.com/meeting#>
PREFIX pb:<http://www.mindparabole.com/ontology/finance/Parabole-Model#>
PREFIX mpb-fin-main-ccar-14q:<http://www.mindparabole.com/ontology/finance/FRY-14Q_Main#>
PREFIX mpb-root-main-crm:<http://www.mindparabole.com/ontology/finance/CreditRiskManagement_Main#>
PREFIX mpb-fin-main-ccar:<http://www.mindparabole.com/ontology/finance/CCAR_Main#>
PREFIX Y14DB_Main:<http://www.nextangles.com/ontology/finance/Y14DB_Main#>
PREFIX xsd:<http://www.w3.org/2001/XMLSchema#>
SELECT  
?labelReport ?report ?reportDescription ?start ?link 
WHERE
 {
    ?ActionItem rdf:type CDE:Action_Item .
   
FILTER(?ActionItem != cit:EnterpriseStatus)
    OPTIONAL {?ActionItem CDE:ActionItemHasResolutionDate ?Date.}
    BIND(replace(?Date,"_","-") AS ?Date2)
    BIND(xsd:date(?Date2) AS ?start)
    ?ActionItem CDE:hasActionItemType ?report.
    FILTER(?report = "Report"||?report = "InitialSubmission"||?report =  "CurrentHeatMap" ||?report= "RegulatoryStatus"||?report= "DryRun")
 
 OPTIONAL{?ActionItem mt:has_Agenda ?reportDescription.}
    OPTIONAL {?ActionItem rdfs:label ?Label. }
   BIND(IF(?report= "Report",CONCAT(xsd:string(?Label),"_",xsd:string(month(?start))),?Label) AS ?labelReport)
    }
    
    

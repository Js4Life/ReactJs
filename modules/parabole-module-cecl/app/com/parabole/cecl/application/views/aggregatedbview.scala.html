<div class="panel panel-default">
    <div class="panel-heading" style="padding-bottom:23px"><span class="glyphicon glyphicon-chevron-left pull-left" style="margin-right:10px;" ng-click="goPreviousScreen()"></span>{{aggrViewConfig.name}}
      <div class="btn-group pull-right">
        <button class="btn btn-default" ng-click="doReference()" popover='"content":"Drop arrow", "placement":"left"'><span class="glyphicon glyphicon-link"></span></button>
        <button class="btn btn-default" ng-click="cleanView()"><span class="glyphicon glyphicon-ban-circle"></span></button>
        <button class="btn btn-default" data-toggle="modal" data-target="#dbViewModal"><span class="glyphicon glyphicon-floppy-disk"></span></button>
        <!-- <button class="btn btn-default" ng-click="getView()"><span class="glyphicon glyphicon-eye-open"></span></button> -->
      </div>
    </div>
    <div class="panel-body" style="height:80vh;">
        <div class="col-xs-3"  style="height:100%;padding:0;overflow-y:auto;">
            <div style="z-index: 999;cursor: alias;" id="{{view.name}}" ng-repeat="view in dbViews" draggable='"helper":"clone", "appendTo":"#mapperWindow"' collapsible='"width": "280", "actObj":"view", "type":"list", "hasCheck":false, "viewable":true, "closable":true, "closeType":"SERVER_SIDE"'></div>
        </div>
        <div id="mapperWindow" droppable='"accept" : ".panel-collapsible", "dropHandler" : "onDbViewDrop"' class="col-xs-9 map-area">
          <div ng-repeat="view in mappableViews" id="{{view.name}}" index="{{$index}}" draggable='"handle":".panel-heading", "containment":"parent", "handler": {"onDragStop":"onDragStop"}' collapselist='"actObj":"view", "closable":true, "closeType":"CLIENT_SIDE"'>
          </div>       
        </div>
    </div>
</div>

<div id="aggdBview" class="modal fade bs-example-modal-lg">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">{{rdbViewData.name}}</h4>
      </div>
      <div class="modal-body" style="height:49vh;overflow:auto;">  
        <div class="table-responsive">
  			  <table class="table">
  			  	<thead><th ng-repeat="head in rdbViewData.columnNames track by $index">{{head}}</th></thead>
  			  	<tr ng-repeat="tr in rdbViewData.tableData track by $index" ng-init="avoidNullValue(tr)"><td ng-repeat="td in tr track by $index">{{td}}</td></tr>
  			  </table>
		    </div>   
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div id="logicalViewModal" class="modal fade bs-example-modal-lg">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">{{viewName}}</h4>
      </div>
      <div class="modal-body" style="height:49vh;overflow:auto;">  
        <div class="table-responsive" id='lvGrid' style='height:45vh'>
         
        </div>   
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div id="relationshipModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Select relationship property</h4>
      </div>
      <div class="modal-body" style="height:66vh;">
        <div class="row-fluid">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Existing Relations</h3>
            </div>
            <div class="panel-body" style="height:20vh;overflow-y:auto;padding:0;">
              <div class="list-group">
                <a class="list-group-item" ng-repeat="ref in references" ng-click="onRelationClick(ref)">
                  <h4 class="list-group-item-heading">{{ref.name}}</h4>
                  <p class="list-group-item-text">{{ref.columnFrom.tableName}}.{{ref.columnFrom.name}} --> {{ref.columnTo.tableName}}.{{ref.columnTo.name}}</p>
                  <span class="glyphicon glyphicon-remove pull-right" style="top:-30px;" ng-click="removeRelation($index)"></span>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="row-fluid">
          <div class="panel panel-default pull-left" style="width:45%;">
            <div class="panel-heading">
              <h3 class="panel-title">{{fromPanel.name}}</h3>
            </div>
            <div class="panel-body" style="padding:0;height:24vh;overflow-y:auto;">
              <ul class="list-group">
                <li class="list-group-item" ng-repeat="attr in fromPanel.attributes"><input name="from" type="radio" ng-model="rel.from" ng-value="attr">&nbsp;{{attr.name}}</li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default pull-right" style="width:45%;">
            <div class="panel-heading">
              <h3 class="panel-title">{{toPanel.name}}</h3>
            </div>
            <div class="panel-body" style="padding:0;height:24vh;overflow-y:auto;">
              <ul class="list-group">
                <li class="list-group-item" ng-repeat="attr in toPanel.attributes"><input name="to" type="radio" ng-model="rel.to" ng-value="attr">&nbsp;{{attr.name}}</li>
              </ul>
            </div>
          </div>           
        </div>
      </div>
      <div class="modal-footer">
        <div class="form-group col-xs-6 pull-left">
           <select class="form-control" ng-options="d.id as d.name for d in cardinals" ng-model="rel.cardinality"></select>
        </div>
        <div class="form-group col-xs-6">
          <input id="name" type="text" class="form-control" placeholder="
           Enter Name" ng-model="rel.name">
        </div>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button id="relName" data-toggle="popover" data-placement="right" data-content="Enter a name" trigger="focus" type="button" class="btn btn-primary" ng-click="addRelation()">Add relation</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade bs-example-modal-sm" id="dbViewModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Enter a name</h4>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
            <input type="text" class="form-control" ng-model="viewName" placeholder="Enter a name" ng-disabled="aggrViewConfig.state == 'landing.logicalview'">
          </div>
          <div class="form-group">
            <label>Select root class</label>
            <select class="form-control" ng-options="v.name as v.name for v in mappableViews" ng-model="rootClass"></select>
          </div>
        </form>        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" ng-click="saveView()">Save</button>
      </div>
    </div>
  </div>
</div>